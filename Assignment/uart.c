/*
* math.c
*
*  Created on: Aug 22, 2017
*      Author: Russty
*/

#include <msp430.h>
#include "uart.h"

int uart_putchar(int c)
{
	/* Wait for the transmit buffer to be ready */
	while (!(IFG2 & UCA0TXIFG));

	/* Transmit data */
	UCA0TXBUF = (char)c;

	return 0;
}

int uart_puts(const char *str)
{
	int status = -1;

	if (str != 0) {
		status = 0;

		while (*str != 0) {
			/* Wait for the transmit buffer to be ready */
			while (!(IFG2 & UCA0TXIFG));

			/* Transmit data */
			UCA0TXBUF = *str;

			/* If there is a line-feed, add a carriage return */
			if (*str == '\n') {
				/* Wait for the transmit buffer to be ready */
				while (!(IFG2 & UCA0TXIFG));
				UCA0TXBUF = '\r';
			}

			str++;
		}
	}

	return status;
}
